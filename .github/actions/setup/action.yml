# Shared steps to set up the Emacs environment for CI.
---
name: Setup dev environment
description: Installs Emacs, Eask, Eask dependencies, and other npm packages
runs:
  using: composite
  steps:
    # Eask dependencies are installed via an npm postinstall hook, so Emacs needs to be installed
    # first.
    - name: Setup Emacs
      uses: purcell/setup-emacs@8415786a52b3a84babd7ffc92a802b06e3780c17
      with:
        version: 30.1

    # Install python for elisp-autofmt invocations.
    - name: Setup Python
      uses: actions/setup-python@v5
      with:
        python-version: "3.x"

    - name: Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: "lts/*"
        cache: npm

    - name: Install npm dependencies
      run: npm ci
      shell: bash
